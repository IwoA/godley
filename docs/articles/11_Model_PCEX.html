<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="godley">
<title>Model PCEX • godley</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Model PCEX">
<meta property="og:description" content="godley">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">godley</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/01_Model_SIM.html">Model SIM</a>
    <a class="dropdown-item" href="../articles/02_Model_SIMEX.html">Model SIMEX</a>
    <a class="dropdown-item" href="../articles/03_Model_PC.html">Model PC</a>
    <a class="dropdown-item" href="../articles/11_Model_PCEX.html">Model PCEX</a>
    <a class="dropdown-item" href="../articles/04_Model_LP.html">Model LP</a>
    <a class="dropdown-item" href="../articles/05_Model_REG.html">Model REG</a>
    <a class="dropdown-item" href="../articles/06_Model_OPEN.html">Model OPEN</a>
    <a class="dropdown-item" href="../articles/07_Model_BMW.html">Model BMW</a>
    <a class="dropdown-item" href="../articles/08_Model_BMWK.html">Model BMWK</a>
    <a class="dropdown-item" href="../articles/09_Model_DIS.html">Model DIS</a>
    <a class="dropdown-item" href="../articles/10_Model_DISINF.html">Model DISINF</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/gamrot/godley">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="11_Model_PCEX_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="11_Model_PCEX_files/plotly-binding-4.10.0/plotly.js"></script><script src="11_Model_PCEX_files/typedarray-0.1/typedarray.min.js"></script><link href="11_Model_PCEX_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="11_Model_PCEX_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="11_Model_PCEX_files/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="11_Model_PCEX_files/plotly-main-2.5.1/plotly-latest.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Model PCEX</h1>
            
      
      
      <div class="d-none name"><code>11_Model_PCEX.Rmd</code></div>
    </div>

    
    
<p>Please find below guidelines how godley package can be used to create
models PCEX — models with government money and portfolio choice with
expectations described by <em>Wynne Godley</em> and <em>Marc Lavoie</em>
in Chapter 4 in <em>Monetary Economics. An Integrated Approach to
Credit, Money, Income, Production and Wealth.</em></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">godley</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="model-pcex---random-shocks">Model PCEX - random shocks<a class="anchor" aria-label="anchor" href="#model-pcex---random-shocks"></a>
</h3>
<p>In this example expectations are subject to a random process,
described in equation with a new variable “Ra” normally distributed with
mean equal to 0: <code>Yd_e = Yd * (1 + Ra)</code><br>
To create this model first you need to create empty SFC model:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create empty model</span></span>
<span><span class="va">model_pcex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_model.html">create_model</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"SFC PCEX"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Empty model created</span></span></code></pre></div>
<p>Next you have to add variables:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add variables</span></span>
<span><span class="va">model_pcex</span> <span class="op">&lt;-</span> <span class="va">model_pcex</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_cb"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_s"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_s"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_h"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_d1"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_d"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_h"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"C"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"V"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"T_x"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Y"</span>, desc <span class="op">=</span> <span class="st">"Income = GDP"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Yd"</span>, desc <span class="op">=</span> <span class="st">"Disposable income of households"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Yd_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_d"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"V_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Ra"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha1"</span>, init <span class="op">=</span> <span class="fl">0.6</span>, desc <span class="op">=</span> <span class="st">"Propensity to consume out of income"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha2"</span>, init <span class="op">=</span> <span class="fl">0.4</span>, desc <span class="op">=</span> <span class="st">"Propensity to consume out of wealth"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"theta"</span>, init <span class="op">=</span> <span class="fl">0.2</span>, desc <span class="op">=</span> <span class="st">"Tax rate"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"r"</span>, init <span class="op">=</span> <span class="fl">0.025</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"G"</span>, init <span class="op">=</span> <span class="fl">20</span>, desc <span class="op">=</span> <span class="st">"Government demand"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda0"</span>, init <span class="op">=</span> <span class="fl">0.635</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda1"</span>, init <span class="op">=</span> <span class="fl">0.05</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda2"</span>, init <span class="op">=</span> <span class="fl">0.01</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
<p>you also have to add equations:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add equations</span></span>
<span><span class="va">model_pcex</span> <span class="op">&lt;-</span> <span class="va">model_pcex</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Y = C + G"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Yd = Y - T_x + r[-1] * B_h[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"T_x = theta * (Y + r[-1] * B_h[-1])"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"V = V[-1] + (Yd - C)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"C = alpha1 * Yd_e + alpha2 * V[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_d =  V_e * lambda0 + V_e * lambda1 * r - lambda2 * Yd_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_d1 = V_e * (1 - lambda0) - V_e * lambda1 * r + lambda2 * Yd_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_d = V_e - B_d"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"V_e = V[-1] + (Yd_e - C)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_h = V - B_h"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_h = B_d"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_s = B_s[-1] + (G + r[-1] * B_s[-1]) - (T_x + r[-1] * B_cb[-1])"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_s = H_s[-1] + B_cb - B_cb[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_cb = B_s - B_h"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Yd_e = Yd * (1 + Ra)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Ra = rnorm(1, 0, 0.05)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_h = H_s"</span>, hidden <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p>Now you can simulate model (in this example for the next 100 periods
using Newton method):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate model</span></span>
<span><span class="va">model_pcex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span><span class="va">model_pcex</span>, scenario <span class="op">=</span> <span class="st">"baseline"</span>, max_iter <span class="op">=</span> <span class="fl">350</span>, periods <span class="op">=</span> <span class="fl">100</span>, </span>
<span>                                hidden_tol <span class="op">=</span> <span class="fl">0.1</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>, method <span class="op">=</span> <span class="st">"Newton"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Model prepared successfully</span></span>
<span><span class="co">#&gt; Simulating scenario baseline (1 of 1)</span></span>
<span><span class="co">#&gt; Scenario(s) successfully simulated</span></span></code></pre></div>
<p>Based on calculated simulation you can display results for desired
set of variables:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot results</span></span>
<span><span class="fu"><a href="../reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model_pcex</span>, scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"baseline"</span><span class="op">)</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"H_h"</span>, <span class="st">'H_d'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-becddd0f2cd30adc702b" style="width:100%;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-becddd0f2cd30adc702b">{"x":{"visdat":{"40ec188251b8":["function () ","plotlyVisDat"]},"cur_data":"40ec188251b8","attrs":{"40ec188251b8":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[0,3.08191087871874,7.36219397662887,13.7001849052593,17.2685801200192,19.1967746800829,18.293076419165,20.0253121748083,25.6145775562157,20.6495483421532,25.8030280604988,24.4850924762714,32.1172626702185,26.5536621364723,25.0854822587223,28.2605616203287,26.9543307493497,28.9416963239387,33.2712497404586,34.3268485225903,33.1199971256058,31.0522398785687,30.1884048814652,30.7531815047149,33.995439617251,32.4695086979279,31.7514581848817,32.7131072485755,30.2984543179488,29.0221987344463,25.5450034482906,29.878881558024,32.9989103279514,29.7312844606551,28.4519829007999,33.6854059825244,31.8779457893217,31.5417817815064,36.0422237083957,31.9208041847853,33.5977635375254,31.0160755424947,31.4692771171961,33.1454838900683,26.1156641872634,31.7662506798575,31.9459169778959,32.9059436672299,37.2929877409426,34.9144536033297],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: H_h","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"40ec188251b8.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[0,5.51100864883734,9.02015553678865,10.958458354732,13.8462688732791,16.8664974295067,20.4324672474998,21.9711276715767,21.5542772986215,25.9530494999039,24.7773319881144,26.8417897362156,24.5367211589232,28.7105413219186,29.9123251312919,28.7830460040243,29.9601390247786,29.3969566268632,28.0464044411026,28.585783253172,30.0001026119432,31.3917249083175,31.8520825561538,31.5574817899748,30.2134760017757,31.3537790697477,31.8149457165795,31.4195174154257,32.5968990546914,32.9108266678058,34.0382308889575,31.4269036476662,30.1323656164771,31.9975900695258,32.4376190661285,29.942635298422,31.2566162596573,31.5561350099903,29.7060060321833,32.1547596001225,31.3788940539435,32.670865807249,32.2563165420486,31.4373263234104,34.5954686440359,31.3094557977292,31.3693281654283,31.0903313430816,29.4536182039963,31.2679963355594],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: H_d","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"spikedistance":1000,"hovermode":"spikers","xaxis":{"domain":[0,1],"automargin":true,"title":"period"},"showlegend":true,"legend":{"xanchor":"left","x":1.02,"y":0.92},"title":{"text":"Scenario baseline"},"yaxis":{"domain":[0,1],"automargin":true,"title":[]}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"y":[0,3.08191087871874,7.36219397662887,13.7001849052593,17.2685801200192,19.1967746800829,18.293076419165,20.0253121748083,25.6145775562157,20.6495483421532,25.8030280604988,24.4850924762714,32.1172626702185,26.5536621364723,25.0854822587223,28.2605616203287,26.9543307493497,28.9416963239387,33.2712497404586,34.3268485225903,33.1199971256058,31.0522398785687,30.1884048814652,30.7531815047149,33.995439617251,32.4695086979279,31.7514581848817,32.7131072485755,30.2984543179488,29.0221987344463,25.5450034482906,29.878881558024,32.9989103279514,29.7312844606551,28.4519829007999,33.6854059825244,31.8779457893217,31.5417817815064,36.0422237083957,31.9208041847853,33.5977635375254,31.0160755424947,31.4692771171961,33.1454838900683,26.1156641872634,31.7662506798575,31.9459169778959,32.9059436672299,37.2929877409426,34.9144536033297],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: H_h","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(31,119,180,1)","width":2},"marker":{"color":"rgba(31,119,180,1)","size":3,"line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[0,5.51100864883734,9.02015553678865,10.958458354732,13.8462688732791,16.8664974295067,20.4324672474998,21.9711276715767,21.5542772986215,25.9530494999039,24.7773319881144,26.8417897362156,24.5367211589232,28.7105413219186,29.9123251312919,28.7830460040243,29.9601390247786,29.3969566268632,28.0464044411026,28.585783253172,30.0001026119432,31.3917249083175,31.8520825561538,31.5574817899748,30.2134760017757,31.3537790697477,31.8149457165795,31.4195174154257,32.5968990546914,32.9108266678058,34.0382308889575,31.4269036476662,30.1323656164771,31.9975900695258,32.4376190661285,29.942635298422,31.2566162596573,31.5561350099903,29.7060060321833,32.1547596001225,31.3788940539435,32.670865807249,32.2563165420486,31.4373263234104,34.5954686440359,31.3094557977292,31.3693281654283,31.0903313430816,29.4536182039963,31.2679963355594],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: H_d","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(255,127,14,1)","width":2},"marker":{"color":"rgba(255,127,14,1)","size":3,"line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>Note: In above example new pipe operator was applied. It does not
work in older R versions (before R 4.1).</p>
</div>
<div class="section level3">
<h3 id="model-pcex1---adaptive-expectations">Model PCEX1 - adaptive expectations<a class="anchor" aria-label="anchor" href="#model-pcex1---adaptive-expectations"></a>
</h3>
<p>In this example we assume that expectations about current disposable
income are based on actual disposable income from the previous
period.<br>
To apply this model first you need to create empty SFC model:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create empty model</span></span>
<span><span class="va">model_pcex1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_model.html">create_model</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"SFC PCEX1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Empty model created</span></span></code></pre></div>
<p>Next you have to add variables:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add variables</span></span>
<span><span class="va">model_pcex1</span> <span class="op">&lt;-</span> <span class="va">model_pcex1</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_cb"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_s"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_s"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_h"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_d1"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_d"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_h"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"C"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"V"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"T_x"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Y"</span>, desc <span class="op">=</span> <span class="st">"Income = GDP"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Yd"</span>, desc <span class="op">=</span> <span class="st">"Disposable income of households"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Yd_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_d"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"V_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha1"</span>, init <span class="op">=</span> <span class="fl">0.6</span>, desc <span class="op">=</span> <span class="st">"Propensity to consume out of income"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha2"</span>, init <span class="op">=</span> <span class="fl">0.4</span>, desc <span class="op">=</span> <span class="st">"Propensity to consume out of wealth"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"theta"</span>, init <span class="op">=</span> <span class="fl">0.2</span>, desc <span class="op">=</span> <span class="st">"Tax rate"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"r"</span>, init <span class="op">=</span> <span class="fl">0.025</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"G"</span>, init <span class="op">=</span> <span class="fl">20</span>, desc <span class="op">=</span> <span class="st">"Government demand"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda0"</span>, init <span class="op">=</span> <span class="fl">0.635</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda1"</span>, init <span class="op">=</span> <span class="fl">0.05</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda2"</span>, init <span class="op">=</span> <span class="fl">0.01</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
<p>you also have to change equation about expected disposable income
from previous example to <code>Yd_e = Yd[-1]</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add equations</span></span>
<span><span class="va">model_pcex1</span> <span class="op">&lt;-</span> <span class="va">model_pcex1</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Y = C + G"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Yd = Y - T_x + r[-1] * B_h[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"T_x = theta * (Y + r[-1] * B_h[-1])"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"V = V[-1] + (Yd - C)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"C = alpha1 * Yd_e + alpha2 * V[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_d =  V_e * lambda0 + V_e * lambda1 * r - lambda2 * Yd_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_d1 = V_e * (1 - lambda0) - V_e * lambda1 * r + lambda2 * Yd_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_d = V_e - B_d"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"V_e = V[-1] + (Yd_e - C)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_h = V - B_h"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_h = B_d"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_s = B_s[-1] + (G + r[-1] * B_s[-1]) - (T_x + r[-1] * B_cb[-1])"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_s = H_s[-1] + B_cb - B_cb[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_cb = B_s - B_h"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Yd_e = Yd[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_h = H_s"</span>, hidden <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p>Now you can simulate model (in this example for the next 100 periods
using Newton method):</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate model</span></span>
<span><span class="va">model_pcex1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span><span class="va">model_pcex1</span>, scenario <span class="op">=</span> <span class="st">"baseline"</span>, max_iter <span class="op">=</span> <span class="fl">350</span>, </span>
<span>                                 periods <span class="op">=</span> <span class="fl">100</span>, hidden_tol <span class="op">=</span> <span class="fl">0.1</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>, method <span class="op">=</span> <span class="st">"Newton"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Model prepared successfully</span></span>
<span><span class="co">#&gt; Simulating scenario baseline (1 of 1)</span></span>
<span><span class="co">#&gt; Scenario(s) successfully simulated</span></span></code></pre></div>
<p>Based on calculated simulation you can display results for desired
set of variables:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot results</span></span>
<span><span class="fu"><a href="../reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model_pcex1</span>, scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"baseline"</span><span class="op">)</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-c3a9fee5ba2210248039" style="width:100%;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c3a9fee5ba2210248039">{"x":{"visdat":{"40ec326329e3":["function () ","plotlyVisDat"]},"cur_data":"40ec326329e3","attrs":{"40ec326329e3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[0,20,36,48.8,59.2404,67.75304,74.69391801,80.353241234,84.9676343102752,88.730031794676,91.797745055477,94.2990396926099,96.3384985109078,98.0013942808762,99.35725511855,100.462771558208,101.364166866926,102.099129707308,102.698389955854,103.187003564267,103.585400185611,103.910237368131,104.17509703183,104.3910533485,104.567135769123,104.710706558489,104.827768622299,104.923216497484,105.001040999982,105.064496086616,105.116234907818,105.158420739739,105.192817434012,105.220863166975,105.243730571941,105.262375768719,105.277578340389,105.289973928814,105.300080811765,105.30832157287,105.315040770463,105.320519344071,105.324986360907,105.32862859351,105.331598328978,105.334019736316,105.335994058124,105.337603843696,105.338916400535,105.33998660857],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: Y","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"spikedistance":1000,"hovermode":"spikers","xaxis":{"domain":[0,1],"automargin":true,"title":"period"},"showlegend":true,"legend":{"xanchor":"left","x":1.02,"y":0.92},"title":{"text":"Scenario baseline"},"yaxis":{"domain":[0,1],"automargin":true,"title":[]}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"y":[0,20,36,48.8,59.2404,67.75304,74.69391801,80.353241234,84.9676343102752,88.730031794676,91.797745055477,94.2990396926099,96.3384985109078,98.0013942808762,99.35725511855,100.462771558208,101.364166866926,102.099129707308,102.698389955854,103.187003564267,103.585400185611,103.910237368131,104.17509703183,104.3910533485,104.567135769123,104.710706558489,104.827768622299,104.923216497484,105.001040999982,105.064496086616,105.116234907818,105.158420739739,105.192817434012,105.220863166975,105.243730571941,105.262375768719,105.277578340389,105.289973928814,105.300080811765,105.30832157287,105.315040770463,105.320519344071,105.324986360907,105.32862859351,105.331598328978,105.334019736316,105.335994058124,105.337603843696,105.338916400535,105.33998660857],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: Y","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(31,119,180,1)","width":2},"marker":{"color":"rgba(31,119,180,1)","size":3,"line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>Note: In above example new pipe operator was applied. It does not
work in older R versions (before R 4.1).</p>
<div class="section level4">
<h4 id="shock---increase-in-the-propensity-to-consume-out-of-disposable-income">Shock - increase in the propensity to consume out of disposable
income<a class="anchor" aria-label="anchor" href="#shock---increase-in-the-propensity-to-consume-out-of-disposable-income"></a>
</h4>
<p>Now you can simulate what will happen with economy if the propensity
to consume out of disposable income increase to 0.7.<br>
First you need to create empty shock object and add new equation for
<code>alpha1</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create empty shock</span></span>
<span><span class="va">shock_pcex1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_shock.html">create_shock</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Shock object created</span></span>
<span></span>
<span><span class="co"># Add shock equation with increased government expenditures</span></span>
<span><span class="va">shock_pcex1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_shock.html">add_shock</a></span><span class="op">(</span><span class="va">shock_pcex1</span>,</span>
<span>                         equation <span class="op">=</span> <span class="st">"alpha1 = 0.7"</span>,</span>
<span>                         desc <span class="op">=</span> <span class="st">"Increase in the propensity to consume out of disposable income"</span>, start <span class="op">=</span> <span class="fl">5</span>, end <span class="op">=</span> <span class="fl">50</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create new scenario with this shock</span></span>
<span><span class="va">model_pcex1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_scenario.html">add_scenario</a></span><span class="op">(</span><span class="va">model_pcex1</span>,</span>
<span>                            name <span class="op">=</span> <span class="st">"expansion"</span>, origin <span class="op">=</span> <span class="st">"baseline"</span>,</span>
<span>                            origin_period <span class="op">=</span> <span class="fl">100</span>, shock <span class="op">=</span> <span class="va">shock_pcex1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Now you can simulate shock scenario:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate shock</span></span>
<span><span class="va">model_pcex1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span><span class="va">model_pcex1</span>,</span>
<span>                                 scenario <span class="op">=</span> <span class="st">"expansion"</span>, max_iter <span class="op">=</span> <span class="fl">350</span>, periods <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                                 hidden_tol <span class="op">=</span> <span class="fl">0.1</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>, method <span class="op">=</span> <span class="st">"Newton"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Simulating scenario expansion (1 of 1)</span></span>
<span><span class="co">#&gt; Scenario(s) successfully simulated</span></span></code></pre></div>
<p>Based on results you can plot national income, evolution of
consumption, expected disposable income and lagged wealth:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot results</span></span>
<span><span class="fu"><a href="../reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model_pcex1</span>, scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"expansion"</span><span class="op">)</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-df345d059c0bb88151f8" style="width:100%;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-df345d059c0bb88151f8">{"x":{"visdat":{"40ec1de22da7":["function () ","plotlyVisDat"]},"cur_data":"40ec1de22da7","attrs":{"40ec1de22da7":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[105.344712453768,105.344712486003,105.344712512286,105.344712533716,113.879183806308,117.975730024437,119.139853253275,118.657543836958,117.274130644463,115.482596819935,113.593895845747,111.792114461465,110.175361327253,108.78548330661,107.629193463679,106.692726485076,105.951711450653,105.377582631218,104.9415396754,104.616816583116,104.379818466512,104.210529101833,104.092473260139,104.012428770921,103.960017984445,103.927261423458,103.908143535585,103.898218009544,103.894265289734,103.894005542944,103.895864753137,103.898788624314,103.902097668708,103.905376615447,103.90839165389,103.911029729492,103.91325494529,103.915077969266,103.916535138006,103.917674645395,103.918547798603,103.919203812896,103.919687010012,103.920035593795,103.920281414635,103.920450313774,103.920562771321,103.920634678166,103.920678120222,103.920702110646],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: Y","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"spikedistance":1000,"hovermode":"spikers","xaxis":{"domain":[0,1],"automargin":true,"title":"period"},"showlegend":true,"legend":{"xanchor":"left","x":1.02,"y":0.92},"title":{"text":"Scenario expansion"},"yaxis":{"domain":[0,1],"automargin":true,"title":[]}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"y":[105.344712453768,105.344712486003,105.344712512286,105.344712533716,113.879183806308,117.975730024437,119.139853253275,118.657543836958,117.274130644463,115.482596819935,113.593895845747,111.792114461465,110.175361327253,108.78548330661,107.629193463679,106.692726485076,105.951711450653,105.377582631218,104.9415396754,104.616816583116,104.379818466512,104.210529101833,104.092473260139,104.012428770921,103.960017984445,103.927261423458,103.908143535585,103.898218009544,103.894265289734,103.894005542944,103.895864753137,103.898788624314,103.902097668708,103.905376615447,103.90839165389,103.911029729492,103.91325494529,103.915077969266,103.916535138006,103.917674645395,103.918547798603,103.919203812896,103.919687010012,103.920035593795,103.920281414635,103.920450313774,103.920562771321,103.920634678166,103.920678120222,103.920702110646],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: Y","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(31,119,180,1)","width":2},"marker":{"color":"rgba(31,119,180,1)","size":3,"line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot results</span></span>
<span><span class="fu"><a href="../reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model_pcex1</span>, scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"expansion"</span><span class="op">)</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Yd_e"</span>, <span class="st">"C"</span>, <span class="st">"V"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-ca9c9a01d14824236fd6" style="width:100%;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ca9c9a01d14824236fd6">{"x":{"visdat":{"40ec78e55ddd":["function () ","plotlyVisDat"]},"cur_data":"40ec78e55ddd","attrs":{"40ec78e55ddd":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[85.3447124537682,85.3447124860029,85.3447125122857,85.3447125337158,85.344712551189,92.1722895695311,95.3409253975316,96.2838906029683,95.8893888766961,94.7642642244954,93.3084751917571,91.7742814438609,90.3109906009782,88.9981453917667,87.8696411399538,86.9308720043968,86.1706236024413,85.5690838932136,85.1030443835625,84.7491125876089,84.4855521163347,84.293204093964,84.1558169680124,84.0600151749516,83.9950648585079,83.9525418488603,83.9259690688294,83.9104638512484,83.9024174362559,83.8992168858936,83.8990120431786,83.9005256387789,83.9029022193312,83.9055905161398,83.9082536781091,83.9107021016677,83.9128441625113,83.9146508325908,83.9161308538727,83.9173137820932,83.9182387807555,83.9189475275121,83.9194799923028,83.9198721658174,83.9201550676643,83.9203545566891,83.9204916115806,83.9205828577091,83.9206411942901,83.9206764313776],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: Yd_e","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"40ec78e55ddd.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[85.3447124537682,85.3447124860029,85.3447125122857,85.3447125337158,93.8791838063079,97.9757300244367,99.139853253275,98.657543836958,97.2741306444627,95.4825968199353,93.5938958457472,91.7921144614653,90.1753613272526,88.7854833066102,87.6291934636786,86.692726485076,85.9517114506532,85.3775826312181,84.9415396754,84.6168165831161,84.3798184665116,84.210529101833,84.0924732601387,84.0124287709213,83.9600179844453,83.927261423458,83.9081435355849,83.8982180095436,83.8942652897338,83.8940055429441,83.8958647531374,83.8987886243142,83.9020976687076,83.9053766154465,83.90839165389,83.9110297294922,83.9132549452903,83.9150779692661,83.9165351380061,83.9176746453953,83.918547798603,83.9192038128962,83.9196870100124,83.9200355937946,83.9202814146353,83.9204503137742,83.9205627713209,83.9206346781661,83.9206781202224,83.9207021106457],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: C","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"40ec78e55ddd.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[85.3447124860029,85.3447125122857,85.3447125337158,85.344712551189,83.6378183144122,81.0030136875071,78.1470510372005,75.3788960769385,72.8690296569713,70.6949080287931,68.8752936269067,67.3941697664197,66.2169538309338,65.3011116642774,64.6027902049955,64.0806873223609,63.6980597649213,63.4235215172657,63.2310944294746,63.0998299626932,63.0132155901456,62.958503456325,62.926045371138,62.9086814587245,62.9012053231395,62.8999129685109,62.9022332841743,62.9064327108867,62.9113843070465,62.9163908072809,62.9210516929225,62.9251652879394,62.9286581353716,62.9315351980342,62.9338456458119,62.935660078831,62.9370559661315,62.938108850738,62.9388874948251,62.9394516301853,62.9398513590944,62.940127538501,62.940312694306,62.9404321681757,62.9405053102296,62.940546608036,62.9405666944243,62.9405732105483,62.9405715217035,62.9405652955572],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: V","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"spikedistance":1000,"hovermode":"spikers","xaxis":{"domain":[0,1],"automargin":true,"title":"period"},"showlegend":true,"legend":{"xanchor":"left","x":1.02,"y":0.92},"title":{"text":"Scenario expansion"},"yaxis":{"domain":[0,1],"automargin":true,"title":[]}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"y":[85.3447124537682,85.3447124860029,85.3447125122857,85.3447125337158,85.344712551189,92.1722895695311,95.3409253975316,96.2838906029683,95.8893888766961,94.7642642244954,93.3084751917571,91.7742814438609,90.3109906009782,88.9981453917667,87.8696411399538,86.9308720043968,86.1706236024413,85.5690838932136,85.1030443835625,84.7491125876089,84.4855521163347,84.293204093964,84.1558169680124,84.0600151749516,83.9950648585079,83.9525418488603,83.9259690688294,83.9104638512484,83.9024174362559,83.8992168858936,83.8990120431786,83.9005256387789,83.9029022193312,83.9055905161398,83.9082536781091,83.9107021016677,83.9128441625113,83.9146508325908,83.9161308538727,83.9173137820932,83.9182387807555,83.9189475275121,83.9194799923028,83.9198721658174,83.9201550676643,83.9203545566891,83.9204916115806,83.9205828577091,83.9206411942901,83.9206764313776],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: Yd_e","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(31,119,180,1)","width":2},"marker":{"color":"rgba(31,119,180,1)","size":3,"line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[85.3447124537682,85.3447124860029,85.3447125122857,85.3447125337158,93.8791838063079,97.9757300244367,99.139853253275,98.657543836958,97.2741306444627,95.4825968199353,93.5938958457472,91.7921144614653,90.1753613272526,88.7854833066102,87.6291934636786,86.692726485076,85.9517114506532,85.3775826312181,84.9415396754,84.6168165831161,84.3798184665116,84.210529101833,84.0924732601387,84.0124287709213,83.9600179844453,83.927261423458,83.9081435355849,83.8982180095436,83.8942652897338,83.8940055429441,83.8958647531374,83.8987886243142,83.9020976687076,83.9053766154465,83.90839165389,83.9110297294922,83.9132549452903,83.9150779692661,83.9165351380061,83.9176746453953,83.918547798603,83.9192038128962,83.9196870100124,83.9200355937946,83.9202814146353,83.9204503137742,83.9205627713209,83.9206346781661,83.9206781202224,83.9207021106457],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: C","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(255,127,14,1)","width":2},"marker":{"color":"rgba(255,127,14,1)","size":3,"line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[85.3447124860029,85.3447125122857,85.3447125337158,85.344712551189,83.6378183144122,81.0030136875071,78.1470510372005,75.3788960769385,72.8690296569713,70.6949080287931,68.8752936269067,67.3941697664197,66.2169538309338,65.3011116642774,64.6027902049955,64.0806873223609,63.6980597649213,63.4235215172657,63.2310944294746,63.0998299626932,63.0132155901456,62.958503456325,62.926045371138,62.9086814587245,62.9012053231395,62.8999129685109,62.9022332841743,62.9064327108867,62.9113843070465,62.9163908072809,62.9210516929225,62.9251652879394,62.9286581353716,62.9315351980342,62.9338456458119,62.935660078831,62.9370559661315,62.938108850738,62.9388874948251,62.9394516301853,62.9398513590944,62.940127538501,62.940312694306,62.9404321681757,62.9405053102296,62.940546608036,62.9405666944243,62.9405732105483,62.9405715217035,62.9405652955572],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: V","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(44,160,44,1)","width":2},"marker":{"color":"rgba(44,160,44,1)","size":3,"line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level3">
<h3 id="model-pcex2---where-the-propensity-to-consume-reacts-negatively-to-higher-interest-rates">Model PCEX2 - where the propensity to consume reacts negatively to
higher interest rates<a class="anchor" aria-label="anchor" href="#model-pcex2---where-the-propensity-to-consume-reacts-negatively-to-higher-interest-rates"></a>
</h3>
<p>In this example we assume that expectations about current disposable
income are based on actual disposable income from the previous period
like in previous example but the propensity to consume reacts negatively
to higher interest rates. To apply this model we need to add two new
variables <code>iota</code> and <code>alpha10</code> to variables used
in PCEX1 and add one additional equation
<code>alpha1 = alpha10 - iota * r[-1]</code>.<br>
To apply this model first you need to create empty SFC model:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create empty model</span></span>
<span><span class="va">model_pcex2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_model.html">create_model</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"SFC PCEX2"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Empty model created</span></span></code></pre></div>
<p>Next you have to add variables:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add variables</span></span>
<span><span class="va">model_pcex2</span> <span class="op">&lt;-</span> <span class="va">model_pcex2</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_cb"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_s"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_s"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_h"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_d1"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_d"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_h"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"C"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"V"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"T_x"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Y"</span>, desc <span class="op">=</span> <span class="st">"Income = GDP"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Yd"</span>, desc <span class="op">=</span> <span class="st">"Disposable income of households"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Yd_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"B_d"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"V_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"iota"</span>, init <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha10"</span>, init <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha1"</span>, init <span class="op">=</span> <span class="fl">0.6</span>, desc <span class="op">=</span> <span class="st">"Propensity to consume out of income"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha2"</span>, init <span class="op">=</span> <span class="fl">0.4</span>, desc <span class="op">=</span> <span class="st">"Propensity to consume out of wealth"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"theta"</span>, init <span class="op">=</span> <span class="fl">0.2</span>, desc <span class="op">=</span> <span class="st">"Tax rate"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"r"</span>, init <span class="op">=</span> <span class="fl">0.025</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"G"</span>, init <span class="op">=</span> <span class="fl">20</span>, desc <span class="op">=</span> <span class="st">"Government demand"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda0"</span>, init <span class="op">=</span> <span class="fl">0.635</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda1"</span>, init <span class="op">=</span> <span class="fl">0.05</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda2"</span>, init <span class="op">=</span> <span class="fl">0.01</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
<p>You also have to add equations:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add equations</span></span>
<span><span class="va">model_pcex2</span> <span class="op">&lt;-</span> <span class="va">model_pcex2</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Y = C + G"</span>, desc <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Yd = Y - T_x + r[-1] * B_h[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"T_x = theta * (Y + r[-1] * B_h[-1])"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"V = V[-1] + (Yd - C)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"C = alpha1 * Yd_e + alpha2 * V[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_d =  V_e * lambda0 + V_e * lambda1 * r - lambda2 * Yd_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_d1 = V_e * (1 - lambda0) - V_e * lambda1 * r + lambda2 * Yd_e"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_d = V_e - B_d"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"V_e = V[-1] + (Yd_e - C)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_h = V - B_h"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_h = B_d"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_s = B_s[-1] + (G + r[-1] * B_s[-1]) - (T_x + r[-1] * B_cb[-1])"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_s = H_s[-1] + B_cb - B_cb[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"B_cb = B_s - B_h"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Yd_e = Yd[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"alpha1 = alpha10 - iota * r[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_h = H_s"</span>, hidden <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p>Now you can simulate model (in this example for the next 100 periods
using Newton method):</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate model</span></span>
<span><span class="va">model_pcex2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span><span class="va">model_pcex2</span>, scenario <span class="op">=</span> <span class="st">"baseline"</span>, max_iter <span class="op">=</span> <span class="fl">350</span>, </span>
<span>                                 periods <span class="op">=</span> <span class="fl">100</span>, hidden_tol <span class="op">=</span> <span class="fl">0.1</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>, method <span class="op">=</span> <span class="st">"Newton"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Model prepared successfully</span></span>
<span><span class="co">#&gt; Simulating scenario baseline (1 of 1)</span></span>
<span><span class="co">#&gt; Scenario(s) successfully simulated</span></span></code></pre></div>
<p>Based on calculated simulation you can display results for desired
set of variables:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot results</span></span>
<span><span class="fu"><a href="../reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model_pcex2</span>, scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"baseline"</span><span class="op">)</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-66ecd89c5f2e957d264a" style="width:100%;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-66ecd89c5f2e957d264a">{"x":{"visdat":{"40ec12913f33":["function () ","plotlyVisDat"]},"cur_data":"40ec12913f33","attrs":{"40ec12913f33":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[0,20,36,48.8,59.2404,67.75304,74.69391801,80.353241234,84.9676343102752,88.730031794676,91.797745055477,94.2990396926099,96.3384985109078,98.0013942808762,99.35725511855,100.462771558208,101.364166866926,102.099129707308,102.698389955854,103.187003564267,103.585400185611,103.910237368131,104.17509703183,104.3910533485,104.567135769123,104.710706558489,104.827768622299,104.923216497484,105.001040999982,105.064496086616,105.116234907818,105.158420739739,105.192817434012,105.220863166975,105.243730571941,105.262375768719,105.277578340389,105.289973928814,105.300080811765,105.30832157287,105.315040770463,105.320519344071,105.324986360907,105.32862859351,105.331598328978,105.334019736316,105.335994058124,105.337603843696,105.338916400535,105.33998660857],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: Y","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"spikedistance":1000,"hovermode":"spikers","xaxis":{"domain":[0,1],"automargin":true,"title":"period"},"showlegend":true,"legend":{"xanchor":"left","x":1.02,"y":0.92},"title":{"text":"Scenario baseline"},"yaxis":{"domain":[0,1],"automargin":true,"title":[]}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"y":[0,20,36,48.8,59.2404,67.75304,74.69391801,80.353241234,84.9676343102752,88.730031794676,91.797745055477,94.2990396926099,96.3384985109078,98.0013942808762,99.35725511855,100.462771558208,101.364166866926,102.099129707308,102.698389955854,103.187003564267,103.585400185611,103.910237368131,104.17509703183,104.3910533485,104.567135769123,104.710706558489,104.827768622299,104.923216497484,105.001040999982,105.064496086616,105.116234907818,105.158420739739,105.192817434012,105.220863166975,105.243730571941,105.262375768719,105.277578340389,105.289973928814,105.300080811765,105.30832157287,105.315040770463,105.320519344071,105.324986360907,105.32862859351,105.331598328978,105.334019736316,105.335994058124,105.337603843696,105.338916400535,105.33998660857],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: Y","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(31,119,180,1)","width":2},"marker":{"color":"rgba(31,119,180,1)","size":3,"line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>Note: In above example new pipe operator was applied. It does not
work in older R versions (before R 4.1).</p>
<div class="section level4">
<h4 id="shock---increase-in-the-rate-of-interest-on-bills">Shock - increase in the rate of interest on bills<a class="anchor" aria-label="anchor" href="#shock---increase-in-the-rate-of-interest-on-bills"></a>
</h4>
<p>Now you can simulate what will happen with the economy if the rate of
interest on bills increase by 100 points.<br>
First you need to create empty shock object and add new equation for
<code>r</code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create empty shock</span></span>
<span><span class="va">shock_pcex2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_shock.html">create_shock</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Shock object created</span></span>
<span></span>
<span><span class="co"># Add shock equation with increased government expenditures</span></span>
<span><span class="va">shock_pcex2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_shock.html">add_shock</a></span><span class="op">(</span><span class="va">shock_pcex2</span>,</span>
<span>                         equation <span class="op">=</span> <span class="st">"r = 0.035"</span>,</span>
<span>                         desc <span class="op">=</span> <span class="st">"Increase in the rate of interest on bills"</span>, start <span class="op">=</span> <span class="fl">5</span>, end <span class="op">=</span> <span class="fl">50</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create new scenario with this shock</span></span>
<span><span class="va">model_pcex2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_scenario.html">add_scenario</a></span><span class="op">(</span><span class="va">model_pcex2</span>,</span>
<span>                            name <span class="op">=</span> <span class="st">"expansion"</span>, origin <span class="op">=</span> <span class="st">"baseline"</span>,</span>
<span>                            origin_period <span class="op">=</span> <span class="fl">100</span>, shock <span class="op">=</span> <span class="va">shock_pcex2</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Now you can simulate shock scenario:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate shock</span></span>
<span><span class="va">model_pcex2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span><span class="va">model_pcex2</span>,</span>
<span>                                 scenario <span class="op">=</span> <span class="st">"expansion"</span>, max_iter <span class="op">=</span> <span class="fl">350</span>, periods <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                                 hidden_tol <span class="op">=</span> <span class="fl">0.1</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>, method <span class="op">=</span> <span class="st">"Newton"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Simulating scenario expansion (1 of 1)</span></span>
<span><span class="co">#&gt; Scenario(s) successfully simulated</span></span></code></pre></div>
<p>Based on results you can plot national income, evolution of
consumption, expected disposable income and lagged wealth:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot results</span></span>
<span><span class="fu"><a href="../reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model_pcex2</span>, scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"expansion"</span><span class="op">)</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-7be41a7e057e911963de" style="width:100%;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-7be41a7e057e911963de">{"x":{"visdat":{"40ec48106e8b":["function () ","plotlyVisDat"]},"cur_data":"40ec48106e8b","attrs":{"40ec48106e8b":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[105.344712453768,105.344712486003,105.344712512286,105.344712533716,105.344712551189,101.930924062819,101.08627086743,101.278480168771,101.880438502827,102.630211585185,103.395193038987,104.113143542802,104.75866369373,105.325149965745,105.815139162489,106.235206856833,106.593327803111,106.89755898175,107.155426051434,107.373677754503,107.558227474994,107.71418529165,107.845929527096,107.957191468099,108.051140177983,108.130461359151,108.19742789785,108.253961586184,108.301686411687,108.341974190391,108.375983442413,108.404692402404,108.428926991029,108.449384484796,108.466653528377,108.481231045134,108.493536521437,108.503924069786,108.512692614618,108.520094492075,108.526342710268,108.53161707841,108.53606938091,108.539827745168,108.543000328682,108.545678431517,108.547939123688,108.54984746305,108.55145836751,108.552818195445],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: Y","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"spikedistance":1000,"hovermode":"spikers","xaxis":{"domain":[0,1],"automargin":true,"title":"period"},"showlegend":true,"legend":{"xanchor":"left","x":1.02,"y":0.92},"title":{"text":"Scenario expansion"},"yaxis":{"domain":[0,1],"automargin":true,"title":[]}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"y":[105.344712453768,105.344712486003,105.344712512286,105.344712533716,105.344712551189,101.930924062819,101.08627086743,101.278480168771,101.880438502827,102.630211585185,103.395193038987,104.113143542802,104.75866369373,105.325149965745,105.815139162489,106.235206856833,106.593327803111,106.89755898175,107.155426051434,107.373677754503,107.558227474994,107.71418529165,107.845929527096,107.957191468099,108.051140177983,108.130461359151,108.19742789785,108.253961586184,108.301686411687,108.341974190391,108.375983442413,108.404692402404,108.428926991029,108.449384484796,108.466653528377,108.481231045134,108.493536521437,108.503924069786,108.512692614618,108.520094492075,108.526342710268,108.53161707841,108.53606938091,108.539827745168,108.543000328682,108.545678431517,108.547939123688,108.54984746305,108.55145836751,108.552818195445],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: Y","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(31,119,180,1)","width":2},"marker":{"color":"rgba(31,119,180,1)","size":3,"line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot results</span></span>
<span><span class="fu"><a href="../reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model_pcex2</span>, scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"expansion"</span><span class="op">)</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Yd"</span>, <span class="st">"C"</span>, <span class="st">"V"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-e8fc1645d1a799b3d60d" style="width:100%;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e8fc1645d1a799b3d60d">{"x":{"visdat":{"40ec77b23330":["function () ","plotlyVisDat"]},"cur_data":"40ec77b23330","attrs":{"40ec77b23330":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[85.3447124860029,85.3447125122857,85.3447125337158,85.344712551189,85.344712565436,83.0424536108157,82.427595489968,82.5758373707776,83.0671014699215,83.6819196989912,84.3103153654633,84.9005772632384,85.4315364759586,85.8976141766451,86.3008201023552,86.6465239024272,86.9412663387941,87.1916664709472,87.4039118201794,87.5835535849925,87.7354570981762,87.8638274240466,87.9722678221951,88.0638492474508,88.1411800322223,88.206470729588,88.2615921417119,88.3081261034742,88.3474093347124,88.380570995435,88.408564681666,88.4321955951253,88.4521435660926,88.4689825359489,88.4831970294162,88.4951960737802,88.5053249565015,88.5138751545698,88.5210927186071,88.5271853515031,88.5323283844697,88.5366698220487,88.5403346010098,88.5434281855696,88.5460396023197,88.5482440021637,88.5501048229675,88.5516756151481,88.5530015827305,88.554120884218],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: Yd","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"40ec77b23330.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[85.3447124537682,85.3447124860029,85.3447125122857,85.3447125337158,85.344712551189,81.9309240628185,81.08627086743,81.2784801687705,81.8804385028267,82.6302115851852,83.3951930389867,84.1131435428017,84.7586636937305,85.325149965745,85.8151391624895,86.2352068568335,86.5933278031112,86.8975589817499,87.1554260514345,87.3736777545025,87.5582274749938,87.7141852916496,87.8459295270959,87.9571914680987,88.0511401779827,88.1304613591506,88.1974278978503,88.2539615861843,88.3016864116872,88.3419741903906,88.375983442413,88.4046924024036,88.4289269910294,88.4493844847964,88.4666535283769,88.4812310451344,88.4935365214365,88.5039240697865,88.512692614618,88.5200944920746,88.5263427102677,88.5316170784099,88.5360693809096,88.5398277451679,88.5430003286821,88.5456784315172,88.5479391236884,88.5498474630502,88.5514583675104,88.5528181954446],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: C","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"40ec77b23330.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[85.3447124860029,85.3447125122857,85.3447125337158,85.344712551189,85.344712565436,86.4562421134331,87.7975667359711,89.0949239379782,90.2815869050729,91.333295018879,92.2484173453556,93.0358510657923,93.7087238480205,94.2811880589205,94.7668689987863,95.1781860443801,95.5261245800629,95.8202320692602,96.0687178380051,96.2785936684951,96.4558232916774,96.6054654240745,96.7318037191737,96.8384614985257,96.9285013527653,97.0045107232027,97.0686749670642,97.1228394843541,97.1685624073793,97.2071592124236,97.2397404516766,97.2672436443982,97.2904602194614,97.3100582706139,97.3266017716532,97.340566800299,97.352355235364,97.3623063201473,97.3707064241365,97.377797283565,97.383782957767,97.3888357014059,97.3931009215061,97.3967013619077,97.3997406355454,97.4023062061919,97.4044719054709,97.4063000575688,97.4078432727889,97.4091459615623],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: V","hovertemplate":"Period: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"spikedistance":1000,"hovermode":"spikers","xaxis":{"domain":[0,1],"automargin":true,"title":"period"},"showlegend":true,"legend":{"xanchor":"left","x":1.02,"y":0.92},"title":{"text":"Scenario expansion"},"yaxis":{"domain":[0,1],"automargin":true,"title":[]}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"y":[85.3447124860029,85.3447125122857,85.3447125337158,85.344712551189,85.344712565436,83.0424536108157,82.427595489968,82.5758373707776,83.0671014699215,83.6819196989912,84.3103153654633,84.9005772632384,85.4315364759586,85.8976141766451,86.3008201023552,86.6465239024272,86.9412663387941,87.1916664709472,87.4039118201794,87.5835535849925,87.7354570981762,87.8638274240466,87.9722678221951,88.0638492474508,88.1411800322223,88.206470729588,88.2615921417119,88.3081261034742,88.3474093347124,88.380570995435,88.408564681666,88.4321955951253,88.4521435660926,88.4689825359489,88.4831970294162,88.4951960737802,88.5053249565015,88.5138751545698,88.5210927186071,88.5271853515031,88.5323283844697,88.5366698220487,88.5403346010098,88.5434281855696,88.5460396023197,88.5482440021637,88.5501048229675,88.5516756151481,88.5530015827305,88.554120884218],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: Yd","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(31,119,180,1)","width":2},"marker":{"color":"rgba(31,119,180,1)","size":3,"line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[85.3447124537682,85.3447124860029,85.3447125122857,85.3447125337158,85.344712551189,81.9309240628185,81.08627086743,81.2784801687705,81.8804385028267,82.6302115851852,83.3951930389867,84.1131435428017,84.7586636937305,85.325149965745,85.8151391624895,86.2352068568335,86.5933278031112,86.8975589817499,87.1554260514345,87.3736777545025,87.5582274749938,87.7141852916496,87.8459295270959,87.9571914680987,88.0511401779827,88.1304613591506,88.1974278978503,88.2539615861843,88.3016864116872,88.3419741903906,88.375983442413,88.4046924024036,88.4289269910294,88.4493844847964,88.4666535283769,88.4812310451344,88.4935365214365,88.5039240697865,88.512692614618,88.5200944920746,88.5263427102677,88.5316170784099,88.5360693809096,88.5398277451679,88.5430003286821,88.5456784315172,88.5479391236884,88.5498474630502,88.5514583675104,88.5528181954446],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: C","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(255,127,14,1)","width":2},"marker":{"color":"rgba(255,127,14,1)","size":3,"line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[85.3447124860029,85.3447125122857,85.3447125337158,85.344712551189,85.344712565436,86.4562421134331,87.7975667359711,89.0949239379782,90.2815869050729,91.333295018879,92.2484173453556,93.0358510657923,93.7087238480205,94.2811880589205,94.7668689987863,95.1781860443801,95.5261245800629,95.8202320692602,96.0687178380051,96.2785936684951,96.4558232916774,96.6054654240745,96.7318037191737,96.8384614985257,96.9285013527653,97.0045107232027,97.0686749670642,97.1228394843541,97.1685624073793,97.2071592124236,97.2397404516766,97.2672436443982,97.2904602194614,97.3100582706139,97.3266017716532,97.340566800299,97.352355235364,97.3623063201473,97.3707064241365,97.377797283565,97.383782957767,97.3888357014059,97.3931009215061,97.3967013619077,97.3997406355454,97.4023062061919,97.4044719054709,97.4063000575688,97.4078432727889,97.4091459615623],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion: V","hovertemplate":["Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}","Period: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(44,160,44,1)","width":2},"marker":{"color":"rgba(44,160,44,1)","size":3,"line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<p>More information about models PC with expectations can be found in
Chapter 4 in <em>Monetary Economics. An Integrated Approach to Credit,
Money, Income, Production and Wealth.</em></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
